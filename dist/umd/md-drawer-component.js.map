{"version":3,"sources":["../../src/md-drawer-component.js"],"names":[],"mappings":"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","file":"md-drawer-component.js","sourcesContent":["import angular from 'angular';\n\nimport {\n  addBehavior,\n  camelCaseToDashes,\n  Behavior,\n  Inject as injectDecorator\n} from 'anglue/anglue';\n\nexport class MdDrawerComponentBehavior extends Behavior {\n  constructor() {\n    super(...arguments);\n\n    this.drawerId = this.config.drawerId || 'drawer';\n    this.drawerCls = this.config.drawerCls;\n\n    if (!this.drawerCls) {\n      const dashName = camelCaseToDashes(this.instance.constructor.annotation.name).toLowerCase();\n      this.drawerCls = `drawer-${dashName}`;\n    }\n\n    this.drawer = this.instance.$mdSidenav(this.drawerId);\n    this.open();\n  }\n\n  get drawerEl() {\n    return angular.element(document.querySelector(`[md-component-id=${this.drawerId}]`));\n  }\n\n  open() {\n    this.drawer.then(() => {\n      this.addDrawerCls();\n      this.drawer.open().then(() => {\n        this.instance.$scope.$on('$destroy', this.onDestroy.bind(this));\n        this.instance.$scope.$watch(() => this.drawer.isOpen(), (isOpen, wasOpen) => {\n          if (!isOpen && wasOpen) {\n            this.doCloseRoute();\n          }\n        });\n      });\n    });\n  }\n\n  close() {\n    this.destroyPromise = this.instance.$q.defer();\n    this.doCloseRoute();\n    return this.destroyPromise.promise;\n  }\n\n  doCloseRoute() {\n    this.instance.$state.go(this.config.closeRoute || '^');\n  }\n\n  onDestroy() {\n    this.drawer.close().then(() => {\n      if (this.destroyPromise) {\n        this.destroyPromise.resolve();\n      }\n      this.removeDrawerCls();\n    });\n  }\n\n  addDrawerCls() {\n    this.drawerEl.addClass(this.drawerCls);\n  }\n\n  removeDrawerCls() {\n    this.drawerEl.removeClass(this.drawerCls);\n  }\n}\n\nexport function MdDrawerComponent(config = {}) {\n  return cls => {\n    const preparedConfig = Object.assign({}, {\n      closeRoute: '^'\n    }, config);\n\n    injectDecorator()(cls.prototype, '$mdSidenav');\n    injectDecorator()(cls.prototype, '$state');\n    injectDecorator()(cls.prototype, '$scope');\n    injectDecorator()(cls.prototype, '$q');\n\n    addBehavior(cls, MdDrawerComponentBehavior, {\n      property: 'mdDrawerComponent',\n      config: preparedConfig,\n      proxy: ['closeDrawer:close']\n    });\n  };\n}\n"]}